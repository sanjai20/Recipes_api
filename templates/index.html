<!DOCTYPE html>
<html>
<head>
    <title>Recipe Search</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>

<h1>ğŸ½ Recipe Search</h1>

<div class="filters">
    <input id="title" placeholder="Search recipe..." />
    <input id="rating" type="number" placeholder="Min Rating" />
    <input id="time" type="number" placeholder="Max Time" />
    <input id="calories" type="number" placeholder="Max Calories" />

    <button onclick="searchRecipes()">Search</button>
</div>

<div id="results"></div>

<script>
async function searchRecipes() {

    const title = document.getElementById("title").value;
    const rating = document.getElementById("rating").value;
    const time = document.getElementById("time").value;
    const calories = document.getElementById("calories").value;

    let url = `/api/recipes/search?page=1&limit=10`;

    if(title) url += `&title=${title}`;
    if(rating) url += `&min_rating=${rating}`;
    if(time) url += `&max_time=${time}`;
    if(calories) url += `&max_calories=${calories}`;

    const res = await fetch(url);
    const data = await res.json();

    const container = document.getElementById("results");
    container.innerHTML = "";

    data.data.forEach(recipe => {

        const card = `
        <div class="card">
            <h3>${recipe.title}</h3>
            <p>â­ Rating: ${recipe.rating ?? "N/A"}</p>
            <p>â± Time: ${recipe.total_time ?? "N/A"} mins</p>
            <p>ğŸ´ Cuisine: ${recipe.cuisine ?? "N/A"}</p>
        </div>
        `;

        container.innerHTML += card;
    });
}
</script>

</body>
</html>